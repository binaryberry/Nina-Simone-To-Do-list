<html>
  <head>
  </head>
  <body>
    <main>
      <header>
        <h1>I CAN HAZ TODO</h1>
      </header>
      <section>
        <nav>
          <input type='text' name='todo' placeholder='Add an item to your todo'>
          <a href='#' id='add-todo'>add</a>
        </nav>
        <ul></ul>
      </section>
      <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
      <script>
        $('document').ready(function() {
         
          if(localStorage.getItem('todos') === null){
          	localStorage.setItem('todos','')
          }
          if(localStorage.getItem('completedtodos') === null){
          	localStorage.setItem('completedtodos','')
          }
          
          window.todos = localStorage.getItem('todos').split(',');
          window.completedtodos = localStorage.getItem('completedtodos').split(',');
          todos.forEach(function(item) {
            if(item !==''){
            addTodo(item)
            }
          });

        });

        var addTodo = function(item) {
          var li = $('<li>').text(item).append('   <a href="#">x</a>');
          li.children().on('click', function() {
            li.css('text-decoration', 'line-through');
            completedTodo(item); 
            for(var i = todos.length - 1; i >= 0; i--) {
    			if(todos[i] === item) {
       				todos.splice(i, 1);
       				localStorage.setItem('todos', window.todos.toString())
    			}
			}
          })
          $('ul').append(li);
          $('input').val('');
        }
        var saveTodo = function(item) {
          	window.todos.push(item);
          	localStorage.setItem('todos', window.todos.toString()); 
         }
        var completedTodo = function(item) {
         	window.completedtodos.push(item);
          	localStorage.setItem('completedtodos', window.completedtodos.toString()); 
         }
        $('#add-todo').on('click', function() {
          var item = $('input').val();
          if(item !=='') {
            addTodo(item);
            saveTodo(item);
          }
        });
        $('input').on('keyup', function() {
          if(event.keyCode === 13) {
            var item = $('input').val();
            if(item !=='') {
              addTodo(item);
              saveTodo(item);
            }
          }
        });
      </script>
  </body>
</html>